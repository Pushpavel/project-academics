<top-bar-layout>
  <mdc-layout container>
    <ng-container *ngIf="stat|async as stat">
      <ng-container *ngIf="userCR|async as cr">

        <div [span]="12" class="header-tile">
          <h4>Attendance</h4>
          <div class="text-block">
            <span class="dark-text-secondary overline">PUBLISHED ON</span>
            <span class="dark-text-primary sub2">12 AUG 2021</span>
          </div>
          <button mdc-button="raised" *ngIf="cr.isFaculty" (click)="publishBtn()">PUBLISH</button>
        </div>

      </ng-container>
    </ng-container>

    <div [span]="12" *ngIf="meta|async as meta">
      <span class="sub2 dark-text-primary">No of Classes Conducted</span>
      <label mdc-text-field class="surface hm16">
        <input mdc-input type="number" [value]="meta.total" (change)="onTotalChange($event)">
      </label>
    </div>

    <ng-container *ngIf="meta|async as meta">

      <mdc-table [span]="8" [rows]="entries|async" [editableTemplate]="editableCell" (edit)="onEdit($event)">
        <column key="rollNo" label="Roll No"></column>
        <column key="name" label="Name"></column>
        <column key="attended" label="No of Classes Attended" numeric [editable]="editable|async"></column>
        <column label="Percentage" numeric [compute]="computePercentage"></column>
      </mdc-table>

      <ng-template #editableCell let-row='row' let-col='col'>
        <label mdc-text-field>
          <input mdc-input type="number" [disabled]="disableEdit" min="0" [max]="meta.total" [value]="row[col.key]">
        </label>
      </ng-template>


    </ng-container>
  </mdc-layout>
</top-bar-layout>



